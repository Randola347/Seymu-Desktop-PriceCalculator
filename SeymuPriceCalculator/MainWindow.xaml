<Window x:Class="SeymuPriceCalculator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Seymu - Calculadora de Madera"
        Height="650"
        Width="1100"
        WindowStartupLocation="CenterScreen">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock Text="Calculadora de Precios - SEYMU"
                   FontSize="28"
                   FontWeight="Bold"
                   Foreground="#2C3E50"
                   Margin="0,0,0,25"/>

        <!-- ================= DATOS CLIENTE ================= -->
        <GroupBox Header="Datos del Cliente"
                  Grid.Row="1"
                  Margin="0,0,0,20"
                  Padding="10">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Nombre:" VerticalAlignment="Center"/>
                <TextBox x:Name="txtNombre"
                         Grid.Column="1"
                         Height="28"
                         PreviewTextInput="SoloLetras"/>

                <TextBlock Text="Teléfono:"
                           Grid.Column="3"
                           VerticalAlignment="Center"/>
                <TextBox x:Name="txtTelefono"
                         Grid.Column="4"
                         Height="28"
                         PreviewTextInput="SoloNumeros"/>
            </Grid>
        </GroupBox>

        <!-- ================= INGRESO PIEZAS ================= -->
        <GroupBox Header="Ingreso de Piezas"
                  Grid.Row="2"
                  Padding="15">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="340"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- PANEL IZQUIERDO -->
                <StackPanel Grid.Column="0">

                    <TextBlock Text="Tipo de Madera"/>
                    <ComboBox x:Name="cmbMadera"
                              SelectedIndex="0"
                              Height="28"
                              Margin="0,5,0,15">
                        <ComboBoxItem Content="Cedro"/>
                        <ComboBoxItem Content="Guanacaste"/>
                        <ComboBoxItem Content="Melina"/>
                        <ComboBoxItem Content="Teca"/>
                        <ComboBoxItem Content="Caobilla"/>
                        <ComboBoxItem Content="Cenizaro"/>
                        <ComboBoxItem Content="Laurel"/>
                        <ComboBoxItem Content="Pino"/>
                    </ComboBox>

                    <TextBlock Text="Largo (Decimal)"/>
                    <TextBox x:Name="txtLargo"
                             Height="28"
                             Margin="0,5,0,15"
                             PreviewTextInput="SoloDecimal"/>

                    <TextBlock Text="Anchos (Ej: 10-7-5-9)"/>
                    <TextBox x:Name="txtAnchos"
                             Height="28"
                             Margin="0,5,0,15"
                             PreviewTextInput="SoloNumerosYGuion"/>

                    <TextBlock Text="Grosor (Pulgadas)"/>
                    <ComboBox x:Name="cmbGrosor"
                              Height="28"
                              Margin="0,5,0,15"
                              SelectedIndex="0">
                        <ComboBoxItem Content="0.5"/>
                        <ComboBoxItem Content="1"/>
                        <ComboBoxItem Content="1.5"/>
                        <ComboBoxItem Content="1.75"/>
                        <ComboBoxItem Content="1.125"/>
                        <ComboBoxItem Content="2"/>
                        <ComboBoxItem Content="3"/>
                    </ComboBox>

                    <TextBlock Text="Precio por Pulgada"/>
                    <TextBox x:Name="txtPrecio"
                             Height="28"
                             Margin="0,5,0,20"
                             PreviewTextInput="SoloDecimal"/>

                    <!-- BOTONES -->
                    <StackPanel Orientation="Horizontal">

                        <Button x:Name="btnAgregar"
                                Content="Agregar"
                                Width="110"
                                Height="40"
                                Background="#27AE60"
                                Foreground="White"
                                FontWeight="Bold"
                                Click="AgregarPieza_Click"/>

                        <Button x:Name="btnGuardar"
                                Content="Guardar"
                                Width="100"
                                Height="40"
                                Background="#2980B9"
                                Foreground="White"
                                FontWeight="Bold"
                                Margin="10,0,0,0"
                                Click="GuardarEdicion_Click"
                                Visibility="Collapsed"/>

                        <Button x:Name="btnCancelar"
                                Content="Cancelar"
                                Width="100"
                                Height="40"
                                Background="#7F8C8D"
                                Foreground="White"
                                FontWeight="Bold"
                                Margin="10,0,0,0"
                                Click="CancelarEdicion_Click"
                                Visibility="Collapsed"/>

                    </StackPanel>

                </StackPanel>

                <!-- ================= TABLA ================= -->
                <DataGrid x:Name="dgPiezas"
                          Grid.Column="2"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          RowHeight="30"
                          HeadersVisibility="Column"
                          AlternatingRowBackground="#F2F2F2">

                    <DataGrid.Columns>

                        <DataGridTextColumn Header="#"
                                            Binding="{Binding Numero}"
                                            Width="40"/>

                        <DataGridTextColumn Header="Tipo Madera"
                                            Binding="{Binding TipoMadera}"
                                            Width="110"/>

                        <DataGridTextColumn Header="Anchos"
                                            Binding="{Binding Anchos}"
                                            Width="90"/>

                        <DataGridTextColumn Header="Largo"
                                            Binding="{Binding Largo}"
                                            Width="70"/>

                        <DataGridTextColumn Header="Total Ancho"
                                            Binding="{Binding TotalAncho}"
                                            Width="90"/>

                        <DataGridTextColumn Header="Grosor"
                                            Binding="{Binding Grosor}"
                                            Width="70"/>

                        <DataGridTextColumn Header="Total Pulgadas"
                                            Binding="{Binding TotalBase}"
                                            Width="110"/>

                        <DataGridTextColumn Header="Precio"
                                            Binding="{Binding Precio}"
                                            Width="80"/>

                        <DataGridTextColumn Header="Total"
                                            Binding="{Binding Total}"
                                            Width="100"/>

                        <!-- ACCIONES -->
                        <DataGridTemplateColumn Header="Acciones" Width="170">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">

                                        <Button Content="Editar"
                                                Tag="{Binding}"
                                                Click="EditarPieza_Click"
                                                Background="#F39C12"
                                                Foreground="White"
                                                Padding="5,2"
                                                Margin="0,0,5,0"/>

                                        <Button Content="Eliminar"
                                                Tag="{Binding}"
                                                Click="EliminarPieza_Click"
                                                Background="#C0392B"
                                                Foreground="White"
                                                Padding="5,2"/>

                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>

                </DataGrid>

            </Grid>
        </GroupBox>

        <!-- ================= TOTALES ================= -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,20,0,0">

            <TextBlock Text="Subtotal: "
                       FontWeight="Bold"
                       Margin="10,0"/>

            <TextBlock x:Name="lblSubtotal"
                       Margin="10,0"/>

            <TextBlock Text="IVA (13%): "
                       FontWeight="Bold"
                       Margin="30,0"/>

            <TextBlock x:Name="lblIVA"
                       Margin="10,0"/>

            <TextBlock Text="Total: "
                       FontWeight="Bold"
                       Margin="30,0"/>

            <TextBlock x:Name="lblTotal"
                       FontSize="16"
                       Foreground="#E74C3C"
                       FontWeight="Bold"
                       Margin="10,0"/>

        </StackPanel>

    </Grid>
</Window>